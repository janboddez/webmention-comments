# Webmentions to Comments
Turn incoming webmentions into blog comments.

All webmentions undergo basic validation and are then dumped into a database table. The content of that table is parsed once per hour, i.e., asynchronously.

## Microformat Parsing
Source URLs of which the markup contains so-called [microformats](http://microformats.org/)—those generated by Bridgy, most blog posts—undergo some additional, rudimentary parsing:
* If the topmost microformat is an h-entry—this goes for most blog posts—the 'parser' will use its properties to update comment metadata.
* If the topmost microformat is an h-feed, i.e., a collection of h-entries, the 'parser' will loop through its children until it encounters an h-entry containing the backlink, i.e., the webmention target, and use its properties to update comment metadata.

## Caveats
Comments pass through WordPress' `wp_new_comment()` function, so that duplicates are still detected. Since 'updated' webmentions are currently treated exactly the same as 'fresh' webmentions—e.g., if properly formatted, they will make it to the queue just fine and result in a '202 Accepted' response—they'll most likely get flagged as duplicate during processing.
